<!doctype html>
<html lang="ko-KR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.23" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <meta name="keywords" content="공부기록, 학습일기, 지식저장소, 공부로그, 학습관리, 공부노트, 지식정리, 공부방법, 학습저장, 기억보조"><meta property="og:title" content="📚 두뇌 저장소 - 재미있는 공부 기록 놀이터"><meta property="og:description" content="까먹지 말고 재밌게 저장하자! 🎯 공부한 내용을 자유롭게 기록하는 즐거운 지식 저장소"><meta property="og:image" content="https://doc.empasy.com/images/favicon.png"><meta property="og:url" content="https://doc.empasy.com/study/"><link rel="icon" href="/images/favicon.ico"><meta name="author" content="엠파시"><meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="naver-site-verification" content="3102a764f7ad54fe27ab3083cd0a7b0f647be4c7"><link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png"><link rel="mask-icon" href="/images/icons/safari-pinned-tab.svg" color="#3eaf7c"><meta name="msapplication-TileImage" content="/images/icons/mstile-150x150.png"><meta name="msapplication-TileColor" content="#3eaf7c"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet"><script src="https://www.googletagmanager.com/gtag/js?id=G-6BNPM5TX7C" async></script><script> window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6BNPM5TX7C'); </script><meta name="application-name" content="Empasy"><meta name="mobile-web-app-capable" content="yes"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><script>((w,d,s,l,i)=>{w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-KPMTVVXN');</script><title>RAG | 살아 있는 소프트웨어는 엠파시가 만듭니다</title><meta name="description" content="까먹지 말고 재밌게 저장하자! 🎯 공부한 내용을 자유롭게 기록하는 즐거운 지식 저장소">
    <link rel="preload" href="/assets/style-BrGqinhp.css" as="style"><link rel="stylesheet" href="/assets/style-BrGqinhp.css">
    <link rel="modulepreload" href="/assets/app-7b98sGgs.js"><link rel="modulepreload" href="/assets/rag.html-C3AcAvGP.js">
    
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><!----><span class="vp-site-name vp-hide-mobile" aria-hidden="true">살아 있는 소프트웨어는 엠파시가 만듭니다</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="홈"><!--[--><!--[--><!--]--><!--]-->홈<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/syncboot/" aria-label="SyncBoot"><!--[--><!--[--><!--]--><!--]-->SyncBoot<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/syncadmin/" aria-label="SyncAdmin"><!--[--><!--[--><!--]--><!--]-->SyncAdmin<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/synccms/" aria-label="SyncCms"><!--[--><!--[--><!--]--><!--]-->SyncCms<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/syncapim/" aria-label="SyncApim"><!--[--><!--[--><!--]--><!--]-->SyncApim<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/synceta/" aria-label="SyncETA"><!--[--><!--[--><!--]--><!--]-->SyncETA<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/agile/" aria-label="애자일"><!--[--><!--[--><!--]--><!--]-->애자일<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.empasy.com/assets/pdf/empasy_guide_v1.8.pdf" aria-label="PDF 다운로드" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->PDF 다운로드<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.empasy.com" aria-label="엠파시" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->엠파시<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/DramaticCollaboration/" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search for documents" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="홈"><!--[--><!--[--><!--]--><!--]-->홈<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/syncboot/" aria-label="SyncBoot"><!--[--><!--[--><!--]--><!--]-->SyncBoot<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/syncadmin/" aria-label="SyncAdmin"><!--[--><!--[--><!--]--><!--]-->SyncAdmin<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/synccms/" aria-label="SyncCms"><!--[--><!--[--><!--]--><!--]-->SyncCms<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/syncapim/" aria-label="SyncApim"><!--[--><!--[--><!--]--><!--]-->SyncApim<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/synceta/" aria-label="SyncETA"><!--[--><!--[--><!--]--><!--]-->SyncETA<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/agile/" aria-label="애자일"><!--[--><!--[--><!--]--><!--]-->애자일<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.empasy.com/assets/pdf/empasy_guide_v1.8.pdf" aria-label="PDF 다운로드" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->PDF 다운로드<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://www.empasy.com" aria-label="엠파시" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->엠파시<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/DramaticCollaboration/" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">공부방 <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/study/rag.html" aria-label="RAG"><!--[--><!--[--><!--]--><!--]-->RAG<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/study/qwen2vlfinetuning.html" aria-label="Qwen2 VL Fine-Tuning"><!--[--><!--[--><!--]--><!--]-->Qwen2 VL Fine-Tuning<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h2 id="rag-랙-구축-완벽-가이드-초보자를-위한-친절한-설명서" tabindex="-1"><a class="header-anchor" href="#rag-랙-구축-완벽-가이드-초보자를-위한-친절한-설명서"><span><strong>RAG(랙) 구축 완벽 가이드: 초보자를 위한 친절한 설명서</strong></span></a></h2><h3 id="목차" tabindex="-1"><a class="header-anchor" href="#목차"><span><strong>목차</strong></span></a></h3><ol><li><a href="#1-rag%EA%B0%80-%EB%AD%94%EA%B0%80%EC%9A%94-%EC%89%AC%EC%9A%B4-%EB%B9%84%EC%9C%A0%EB%A1%9C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0">RAG가 뭔가요? 쉬운 비유로 이해하기</a></li><li><a href="#2-%EC%99%9C-rag%EA%B0%80-%ED%95%84%EC%9A%94%ED%95%A0%EA%B9%8C%EC%9A%94">왜 RAG가 필요할까요?</a></li><li><a href="#3-rag%EB%A5%BC-%EA%B5%AC%EC%B6%95%ED%95%98%EB%A0%A4%EB%A9%B4-%EB%AC%B4%EC%97%87%EC%9D%B4-%ED%95%84%EC%9A%94%ED%95%A0%EA%B9%8C%EC%9A%94-%EC%A4%80%EB%B9%84%EB%AC%BC">RAG를 구축하려면 무엇이 필요할까요? (준비물)</a></li><li><a href="#4-rag-%EA%B5%AC%EC%B6%95-5%EB%8B%A8%EA%B3%84-%EB%94%B0%EB%9D%BC%EB%A7%8C-%ED%95%98%EB%A9%B4-%EB%90%A9%EB%8B%88%EB%8B%A4">RAG 구축 5단계: 따라만 하면 됩니다!</a></li><li><a href="#5-%EC%96%B4%EB%96%A4-%EB%8F%84%EA%B5%AC%EB%93%A4%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%A9%B4-%EC%A2%8B%EC%9D%84%EA%B9%8C%EC%9A%94">어떤 도구들을 사용하면 좋을까요?</a></li></ol><hr><h3 id="_1-rag가-뭔가요-쉬운-비유로-이해하기" tabindex="-1"><a class="header-anchor" href="#_1-rag가-뭔가요-쉬운-비유로-이해하기"><span><strong>1. RAG가 뭔가요? 쉬운 비유로 이해하기</strong></span></a></h3><p><strong>RAG(Retrieval-Augmented Generation)</strong> 는 <strong>&quot;정보 검색(Retrieval) + 답변 생성(Generation)&quot;</strong> 을 합친 기술입니다.</p><ul><li><strong><code>R</code>(Retrieval - 검색)</strong>: 방대한 문서 더미에서 <strong>질문과 관련된 정보를 찾아오는</strong> 단계</li><li><strong><code>AG</code>(Augmented Generation - 향상된 생성)</strong>: 찾아온 정보를 바탕으로 <strong>LLM이 정확한 답변을 생성하는</strong> 단계</li></ul><h4 id="🛎️-쉬운-비유-열심히-하는-비서님" tabindex="-1"><a class="header-anchor" href="#🛎️-쉬운-비유-열심히-하는-비서님"><span><strong>🛎️ 쉬운 비유: 열심히 하는 비서님</strong></span></a></h4><p>여러분에게 <strong><code>A</code></strong> 와 <strong><code>B</code></strong> , 두 명의 비서가 있다고 상상해보세요.</p><ul><li><p><strong>비서 A (일반적인 LLM)</strong>: 머리가 엄청 좋아서 수많은 책을 읽었습니다. 하지만 가끔 <strong>잊어버리거나, 최신 정보를 모를 때가 있습니다.</strong> 그리고 가끔 <strong>&quot;있어 보이는&quot; 말을 지어내기도(Hallucination) 합니다.</strong></p></li><li><p><em>&quot;2024년 한국 축구 국가대표팀 감독이 누구예요?&quot;</em></p></li><li><p><em>&quot;음... 클린스만... 인가? 아니면 홍명보...? (확신 없음 또는 잘못된 답변)&quot;</em></p></li><li><p><strong>비서 B (RAG를 사용하는 LLM)</strong>: 비서 A만큼 머리는 좋지만, <strong>옆에 완벽한 자료실이 있습니다.</strong> 여러분이 질문하면,</p></li></ul><ol><li>먼저 <strong>자료실(DB)로 뛰어가서</strong> 최신 뉴스, 회사 문서, 보고서 등 <strong>관련 자료를 찾아옵니다. (Retrieval)</strong></li><li>찾아온 자료를 비서 A에게 건네주면서 <strong>&quot;자, 이 자료 보면서 답변해&quot;</strong> 라고 합니다.</li><li>비서 A는 <strong>정확한 자료를 바탕으로</strong> 자신있게 답변합니다. <strong>(Augmented Generation)</strong></li></ol><ul><li><em>&quot;2024년 한국 축구 국가대표팀 감독이 누구예요?&quot;</em></li><li><em>&quot;(자료실에서 &#39;2024년 3월, 대한축구협회, 황선홍 감독 선임&#39; 기사를 찾아옴)&quot;</em></li><li><em>&quot;네, 2024년 현재 한국 축구 국가대표팀 감독은 황선홍 감독입니다. 관련 기사 내용은 다음과 같습니다...&quot;</em></li></ul><p><strong>결론: RAG는 LLM에게 &#39;정확한 자료&#39;를 먼저 찾아주어 더 신뢰할 수 있는 답변을 만들게 해주는 &#39;똑똑한 비서 시스템&#39;입니다.</strong></p><hr><h3 id="_2-왜-rag가-필요할까요" tabindex="-1"><a class="header-anchor" href="#_2-왜-rag가-필요할까요"><span><strong>2. 왜 RAG가 필요할까요?</strong></span></a></h3><p>일반적인 LLM(예: ChatGPT)의 <strong>단점을 해결</strong>해 줍니다.</p><ol><li><strong>최신 정보 부족</strong>: LLM은 학습이 끊긴 시점의 데이터만 알고 있습니다. RAG는 실시간 문서를 제공해 최신 정보로 답변하게 합니다.</li><li><strong>망상(Hallucination)</strong>: 없는 사실을 지어낼 때가 있습니다. RAG는 <strong>&#39;근거 자료&#39;</strong> 를 제공해 이를 방지합니다.</li><li><strong>내부 정보 활용 불가</strong>: 회사의 매뉴얼, 계약서, 메일 등 <strong>비공개 문서를 LLM이 알지 못합니다.</strong> RAG는 이 내부 문서들을 자료실에 넣어 활용하게 합니다.</li><li><strong>투명성과 신뢰성</strong>: 답변의 출처(어떤 문서의 몇 페이지)를 제공해 <strong>&quot;왜 그렇게 답변했는지&quot;</strong> 확인이 가능합니다.</li></ol><hr><h3 id="_3-rag를-구축하려면-무엇이-필요할까요-준비물" tabindex="-1"><a class="header-anchor" href="#_3-rag를-구축하려면-무엇이-필요할까요-준비물"><span><strong>3. RAG를 구축하려면 무엇이 필요할까요? (준비물)</strong></span></a></h3><p>크게 4가지 구성 요소가 필요합니다.</p><ol><li><strong>지식(Knowledge) / 문서 데이터</strong>: 답변의 근거가 될 <strong>내부 문서들</strong> (PDF, HWP, Word, Excel, PPT, 웹페이지, DB 등)</li><li><strong>임베딩 모델(Embedding Model)</strong>: 문서의 <strong>&#39;의미&#39;를 숫자로 변환</strong>해주는 AI. 비유하자면 <strong>&#39;문서를 컴퓨터가 이해할 수 있는 바코드(벡터)로 만들어주는 스캐너&#39;</strong> 입니다.</li><li><strong>벡터 데이터베이스(Vector DB)</strong>: 그 &#39;바코드(벡터)&#39;들을 <strong>저장하고, 빠르게 검색할 수 있는</strong> 특별한 DB. <strong>&#39;초고속 정리된 자료실&#39;</strong> 이라고 생각하세요.</li><li><strong>LLM(Large Language Model)</strong>: 최종적으로 <strong>답변을 생성하는</strong> AI. (예: GPT-4, Claude, Llama2 등)</li></ol><hr><h3 id="_4-rag-구축-5단계-따라만-하면-됩니다" tabindex="-1"><a class="header-anchor" href="#_4-rag-구축-5단계-따라만-하면-됩니다"><span><strong>4. RAG 구축 5단계: 따라만 하면 됩니다!</strong></span></a></h3><p>전체 과정은 <strong>&#39;자료실 세팅&#39;</strong> 과 <strong>&#39;질문-답변&#39;</strong> 두 파트로 나눌 수 있습니다.</p><div class="mermaid"></div><h4 id="파트-1-자료실-세팅-한번-해두면-계속-사용" tabindex="-1"><a class="header-anchor" href="#파트-1-자료실-세팅-한번-해두면-계속-사용"><span><strong>파트 1: 자료실 세팅 (한번 해두면 계속 사용)</strong></span></a></h4><p><strong>1단계: 문서 수집 및 전처리</strong></p><ul><li><strong>하는 일</strong>: PDF, Word 등 다양한 형식의 문서를 <strong>텍스트만 뽑아내서</strong> 정리합니다.</li><li><strong>세부 작업</strong>:</li><li><strong>텍스트 추출</strong>: 문서에서 글자만 뽑아냅니다.</li><li><strong>쪼개기(Chunking)</strong>: 100페이지짜리 문서를 통째로 넣으면 효율이 나쁩니다. <strong>의미가 통하는 단위(예: 3~5문단씩)</strong> 로 잘라줍니다. 이게 <strong>자료실의 한 장 한 장</strong>이 됩니다.</li><li><strong>정제</strong>: 불필요한 공백, 특수문자를 정리합니다.</li></ul><p><strong>2단계: 문서를 숫자(벡터)로 변환 (임베딩)</strong></p><ul><li><strong>하는 일</strong>: 쪼개놓은 텍스트 조각들을 <strong>임베딩 모델</strong>에 넣어 <strong>숫자 나열(벡터)</strong> 로 변환합니다. 의미가 비슷한 문서들은 비슷한 숫자 값을 가집니다.</li></ul><p><strong>3단계: 벡터 데이터베이스에 저장</strong></p><ul><li><strong>하는 일</strong>: 변환된 숫자들(벡터)과 원본 텍스트를 <strong>벡터 DB</strong>에 짝지어 저장합니다. 이제 <strong>&#39;의미 기반&#39;으로 검색할 수 있는 자료실</strong>이 완성되었습니다.</li></ul><h4 id="파트-2-질문-답변-사용자가-질문할-때마다-진행" tabindex="-1"><a class="header-anchor" href="#파트-2-질문-답변-사용자가-질문할-때마다-진행"><span><strong>파트 2: 질문-답변 (사용자가 질문할 때마다 진행)</strong></span></a></h4><p><strong>4단계: 질문을 숫자(벡터)로 변환 및 검색</strong></p><ul><li><strong>하는 일</strong>: 사용자의 질문도 <strong>똑같은 임베딩 모델</strong>을 이용해 숫자(벡터)로 변환합니다.</li><li>그런 다음, <strong>벡터 DB에서</strong> 이 질문의 벡터와 <strong>가장 유사한 벡터(즉, 가장 관련성 높은 문서)</strong> 를 찾아서 그 <strong>원본 텍스트를 꺼내옵니다.</strong></li></ul><p><strong>5단계: LLM이 최종 답변 생성</strong></p><ul><li><strong>하는 일</strong>: 다음과 같은 <strong>&#39;설명서(프롬프트)&#39;</strong> 와 함께 찾아온 문서들을 LLM에게 건넵니다.</li><li><em>&quot;당신은 유용한 Assistant입니다. 아래 [참고 문서] 내용만을 정확히 참고하여 사용자의 질문에 답변하세요. 모르는 건 모른다고 하세요.&quot;</em></li><li><code>[참고 문서]:</code> (4단계에서 찾아온 텍스트들)</li><li><code>[사용자 질문]:</code> &quot;우리 회사 휴가 규정은 어떻게 되나요?&quot;</li><li>LLM은 <strong>주어진 문서를 참조해서</strong> 정확하고 신뢰할 수 있는 답변을 생성합니다.</li></ul><hr><h3 id="_5-어떤-도구들을-사용하면-좋을까요" tabindex="-1"><a class="header-anchor" href="#_5-어떤-도구들을-사용하면-좋을까요"><span><strong>5. 어떤 도구들을 사용하면 좋을까요?</strong></span></a></h3><p>코딩 없이도 GUI로 쉽게 시작할 수 있는 도구들과, 본격적으로 개발할 때用的인 오픈소스 도구들을 소개합니다.</p><h4 id="초보자-비개발자-친화적-도구-low-code-no-code" tabindex="-1"><a class="header-anchor" href="#초보자-비개발자-친화적-도구-low-code-no-code"><span><strong>초보자/비개발자 친화적 도구 (Low-Code/No-Code)</strong></span></a></h4><ul><li><strong>ChatPDF, AskYourPDF</strong>: 그냐 PDF 파일을 업로드하면 바로 질문할 수 있는 서비스. RAG의 가장 간단한 형태입니다.</li><li><strong>Microsoft Copilot Studio</strong>: 마이크로소프트 365 제품군 사용한다면, SharePoint나 Word 파일에 기반한 RAG 챗봇을 쉽게 만들 수 있습니다.</li><li><strong>Notion AI</strong>: 노션 workspace 내의 문서를 기반으로 답변.</li></ul><h4 id="본격적으로-개발하기-위한-오픈소스-도구들" tabindex="-1"><a class="header-anchor" href="#본격적으로-개발하기-위한-오픈소스-도구들"><span><strong>본격적으로 개발하기 위한 오픈소스 도구들</strong></span></a></h4><ul><li><strong>임베딩 모델</strong>: <code>all-MiniLM-L6-v2</code> (가볍고 좋음), <code>BGE</code>, <code>OpenAI의 text-embedding-3</code> (성능 좋음)</li><li><strong>벡터 DB</strong>: <code>Chroma</code> (가장 쉬움), <code>Weaviate</code>, <code>Qdrant</code>, <code>Pinecone</code> (클라우드 서비스)</li><li><strong>LLM</strong>: <code>OpenAI API (GPT-4)</code>, <code>Anthropic API (Claude)</code>, <code>Llama 3</code> (오픈소스)</li><li><strong>프레임워크</strong>: <code>LangChain</code>, <code>LlamaIndex</code> - RAG 시스템의 <strong>접착제</strong> 같은 역할. 위의 모든 요소들을 쉽게 연결하게 도와주는 파이썬 라이브러리입니다.</li></ul><p><strong>시작 추천 조합:</strong> <code>LangChain</code> + <code>Chroma DB</code> + <code>all-MiniLM-L6-v2</code> + <code>GPT-4 API</code> 조합이 학습하기에 좋습니다.</p><h1 id="rag-retrieval-augmented-generation-구축-가이드-java-개발자-샘플" tabindex="-1"><a class="header-anchor" href="#rag-retrieval-augmented-generation-구축-가이드-java-개발자-샘플"><span>RAG(Retrieval-Augmented Generation) 구축 가이드: Java 개발자 샘플</span></a></h1><h2 id="목차-1" tabindex="-1"><a class="header-anchor" href="#목차-1"><span>목차</span></a></h2><ol><li><a href="#1-rag%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80">RAG란 무엇인가?</a></li><li><a href="#2-rag%EC%9D%98-%ED%95%84%EC%9A%94%EC%84%B1">RAG의 필요성</a></li><li><a href="#3-rag-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EA%B5%AC%EC%84%B1-%EC%9A%94%EC%86%8C">RAG 시스템 구성 요소</a></li><li><a href="#4-java-%EA%B8%B0%EB%B0%98-rag-%EA%B5%AC%ED%98%84-%EB%8B%A8%EA%B3%84">Java 기반 RAG 구현 단계</a></li><li><a href="#5-%EA%B0%84%EB%8B%A8%ED%95%9C-java-%EA%B5%AC%ED%98%84-%EC%98%88%EC%A0%9C">간단한 Java 구현 예제</a></li><li><a href="#6-%ED%96%A5%ED%9B%84-%EB%B0%9C%EC%A0%84-%EB%B0%A9%ED%96%A5">향후 발전 방향</a></li></ol><hr><h2 id="_1-rag란-무엇인가" tabindex="-1"><a class="header-anchor" href="#_1-rag란-무엇인가"><span>1. RAG란 무엇인가?</span></a></h2><p>RAG(Retrieval-Augmented Generation)는 <strong>정보 검색(Retrieval)</strong> 과 <strong>답변 생성(Generation)</strong> 을 결합한 기술로, 대형 언어 모델(LLM)이 외부 지식 소스를 활용하여 더 정확하고 신뢰할 수 있는 답변을 생성할 수 있게 합니다.</p><h3 id="🎯-쉬운-비유-도서관-사서" tabindex="-1"><a class="header-anchor" href="#🎯-쉬운-비유-도서관-사서"><span>🎯 쉬운 비유: 도서관 사서</span></a></h3><ul><li><strong>일반 LLM</strong>: 백과사전을 통째로 외운 천재 (但, 최신 정보 없고 가끔 틀림)</li><li><strong>RAG LLM</strong>: 도서관에서 관련 자료 찾아와 참고하며 답변하는 사서 (정확하고 최신 정보 제공)</li></ul><hr><h2 id="_2-rag의-필요성" tabindex="-1"><a class="header-anchor" href="#_2-rag의-필요성"><span>2. RAG의 필요성</span></a></h2><table><thead><tr><th>문제점</th><th>일반 LLM</th><th>RAG 적용 시</th></tr></thead><tbody><tr><td>최신 정보 부족</td><td>❌ 학습 데이터에만 의존</td><td>✅ 실시간 정보 활용</td></tr><tr><td>망상(Hallucination)</td><td>❌ 가끔 지어냄</td><td>✅ 근거 자료 기반</td></tr><tr><td>내부 정보 활용</td><td>❌ 불가능</td><td>✅ 가능</td></tr><tr><td>투명성 부족</td><td>❌ 답변 근거 불명확</td><td>✅ 출처 명시 가능</td></tr></tbody></table><hr><h2 id="_3-rag-시스템-구성-요소" tabindex="-1"><a class="header-anchor" href="#_3-rag-시스템-구성-요소"><span>3. RAG 시스템 구성 요소</span></a></h2><ol><li><strong>문서 저장소</strong>: PDF, Word, 내부 문서 등 원본 자료</li><li><strong>임베딩 모델</strong>: 텍스트 → 숫자 벡터 변환</li><li><strong>벡터 데이터베이스</strong>: 벡터 저장 및 유사도 검색</li><li><strong>LLM</strong>: 최종 답변 생성</li></ol><hr><h2 id="_4-java-기반-rag-구현-단계" tabindex="-1"><a class="header-anchor" href="#_4-java-기반-rag-구현-단계"><span>4. Java 기반 RAG 구현 단계</span></a></h2><h3 id="단계-1-환경-설정-의존성-추가" tabindex="-1"><a class="header-anchor" href="#단계-1-환경-설정-의존성-추가"><span>단계 1: 환경 설정 (의존성 추가)</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code><span class="line"><span class="token comment">&lt;!-- pom.xml --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.ai<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-ai-openai-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.8.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token comment">&lt;!-- 벡터 DB 의존성 (선택 사항) --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="단계-2-문서-로드-및-분할" tabindex="-1"><a class="header-anchor" href="#단계-2-문서-로드-및-분할"><span>단계 2: 문서 로드 및 분할</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DocumentLoader</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">loadAndSplitDocuments</span><span class="token punctuation">(</span><span class="token class-name">String</span> filePath<span class="token punctuation">,</span> <span class="token keyword">int</span> chunkSize<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">String</span> content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAllBytes</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token function">splitTextIntoChunks</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> chunkSize<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">splitTextIntoChunks</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">,</span> <span class="token keyword">int</span> chunkSize<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> chunks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> text<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> chunkSize<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            chunks<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>text<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>i <span class="token operator">+</span> chunkSize<span class="token punctuation">,</span> text<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> chunks<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="단계-3-텍스트-임베딩-생성" tabindex="-1"><a class="header-anchor" href="#단계-3-텍스트-임베딩-생성"><span>단계 3: 텍스트 임베딩 생성</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@Service</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmbeddingService</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">OpenAiEmbeddingClient</span> embeddingClient<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">EmbeddingService</span><span class="token punctuation">(</span><span class="token class-name">OpenAiEmbeddingClient</span> embeddingClient<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>embeddingClient <span class="token operator">=</span> embeddingClient<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> <span class="token function">generateEmbedding</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> embeddingClient<span class="token punctuation">.</span><span class="token function">embed</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="단계-4-벡터-저장-및-검색-간단한-구현" tabindex="-1"><a class="header-anchor" href="#단계-4-벡터-저장-및-검색-간단한-구현"><span>단계 4: 벡터 저장 및 검색 (간단한 구현)</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleVectorStore</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> vectorMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> textMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">storeVector</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">,</span> <span class="token class-name">String</span> text<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> vector<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        vectorMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> vector<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        textMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">findMostSimilar</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> queryVector<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">String</span> mostSimilarId <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">double</span> maxSimilarity <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Map<span class="token punctuation">.</span>Entry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> entry <span class="token operator">:</span> vectorMap<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">double</span> similarity <span class="token operator">=</span> <span class="token function">cosineSimilarity</span><span class="token punctuation">(</span>queryVector<span class="token punctuation">,</span> entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>similarity <span class="token operator">&gt;</span> maxSimilarity<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                maxSimilarity <span class="token operator">=</span> similarity<span class="token punctuation">;</span></span>
<span class="line">                mostSimilarId <span class="token operator">=</span> entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> textMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>mostSimilarId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">double</span> <span class="token function">cosineSimilarity</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> vectorA<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> vectorB<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">double</span> dotProduct <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">double</span> normA <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">double</span> normB <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vectorA<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            dotProduct <span class="token operator">+=</span> vectorA<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">*</span> vectorB<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            normA <span class="token operator">+=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>vectorA<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            normB <span class="token operator">+=</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>vectorB<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> dotProduct <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>normA<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>normB<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="단계-5-rag-시스템-통합" tabindex="-1"><a class="header-anchor" href="#단계-5-rag-시스템-통합"><span>단계 5: RAG 시스템 통합</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@Service</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RagService</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">EmbeddingService</span> embeddingService<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">SimpleVectorStore</span> vectorStore<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">OpenAiChatClient</span> chatClient<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">RagService</span><span class="token punctuation">(</span><span class="token class-name">EmbeddingService</span> embeddingService<span class="token punctuation">,</span></span>
<span class="line">                     <span class="token class-name">SimpleVectorStore</span> vectorStore<span class="token punctuation">,</span></span>
<span class="line">                     <span class="token class-name">OpenAiChatClient</span> chatClient<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>embeddingService <span class="token operator">=</span> embeddingService<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>vectorStore <span class="token operator">=</span> vectorStore<span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">this</span><span class="token punctuation">.</span>chatClient <span class="token operator">=</span> chatClient<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token class-name">String</span> question<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 1. 질문 임베딩 생성</span></span>
<span class="line">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> questionEmbedding <span class="token operator">=</span> embeddingService<span class="token punctuation">.</span><span class="token function">generateEmbedding</span><span class="token punctuation">(</span>question<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 2. 관련 문서 검색</span></span>
<span class="line">        <span class="token class-name">String</span> relevantText <span class="token operator">=</span> vectorStore<span class="token punctuation">.</span><span class="token function">findMostSimilar</span><span class="token punctuation">(</span>questionEmbedding<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 3. LLM에 컨텍스트와 함께 질문</span></span>
<span class="line">        <span class="token class-name">String</span> prompt <span class="token operator">=</span> <span class="token string">&quot;다음 문서 내용을 참고하여 질문에 답변하세요:\n\n&quot;</span> <span class="token operator">+</span></span>
<span class="line">                       <span class="token string">&quot;문서: &quot;</span> <span class="token operator">+</span> relevantText <span class="token operator">+</span> <span class="token string">&quot;\n\n&quot;</span> <span class="token operator">+</span></span>
<span class="line">                       <span class="token string">&quot;질문: &quot;</span> <span class="token operator">+</span> question <span class="token operator">+</span> <span class="token string">&quot;\n\n&quot;</span> <span class="token operator">+</span></span>
<span class="line">                       <span class="token string">&quot;답변:&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">return</span> chatClient<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>prompt<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_5-간단한-java-구현-예제" tabindex="-1"><a class="header-anchor" href="#_5-간단한-java-구현-예제"><span>5. 간단한 Java 구현 예제</span></a></h2><h3 id="전체-애플리케이션-코드" tabindex="-1"><a class="header-anchor" href="#전체-애플리케이션-코드"><span>전체 애플리케이션 코드</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token annotation punctuation">@SpringBootApplication</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleRagApplication</span> <span class="token keyword">implements</span> <span class="token class-name">CommandLineRunner</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">RagService</span> ragService<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">DocumentLoader</span> documentLoader<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">EmbeddingService</span> embeddingService<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Autowired</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token class-name">SimpleVectorStore</span> vectorStore<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SimpleRagApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 문서 로드 및 처리</span></span>
<span class="line">        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> chunks <span class="token operator">=</span> documentLoader<span class="token punctuation">.</span><span class="token function">loadAndSplitDocuments</span><span class="token punctuation">(</span><span class="token string">&quot;data/company_policy.txt&quot;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 벡터 저장소에 문서 저장</span></span>
<span class="line">        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> chunks<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> embedding <span class="token operator">=</span> embeddingService<span class="token punctuation">.</span><span class="token function">generateEmbedding</span><span class="token punctuation">(</span>chunks<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            vectorStore<span class="token punctuation">.</span><span class="token function">storeVector</span><span class="token punctuation">(</span><span class="token string">&quot;doc_&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">,</span> chunks<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> embedding<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment">// 간단한 쿼리 인터페이스</span></span>
<span class="line">        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;RAG 시스템이 준비되었습니다. 질문을 입력하세요 (종료: exit):&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;&gt; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">String</span> question <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;exit&quot;</span><span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>question<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">            <span class="token class-name">String</span> answer <span class="token operator">=</span> ragService<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>question<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;답변: &quot;</span> <span class="token operator">+</span> answer<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        scanner<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="application-properties-설정" tabindex="-1"><a class="header-anchor" href="#application-properties-설정"><span>application.properties 설정</span></a></h3><div class="language-properties line-numbers-mode" data-highlighter="prismjs" data-ext="properties"><pre><code><span class="line"><span class="token comment"># OpenAI API 설정</span></span>
<span class="line"><span class="token key attr-name">spring.ai.openai.api-key</span><span class="token punctuation">=</span><span class="token value attr-value">your-openai-api-key</span></span>
<span class="line"><span class="token key attr-name">spring.ai.openai.chat.model</span><span class="token punctuation">=</span><span class="token value attr-value">gpt-3.5-turbo</span></span>
<span class="line"><span class="token key attr-name">spring.ai.openai.embedding.model</span><span class="token punctuation">=</span><span class="token value attr-value">text-embedding-ada-002</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_6-고급-기능" tabindex="-1"><a class="header-anchor" href="#_6-고급-기능"><span>6. 고급 기능</span></a></h2><ol><li><strong>고급 벡터 데이터베이스 도입</strong>: Chroma, Pinecone, Weaviate 등</li><li><strong>성능 최적화</strong>: 임베딩 캐싱, 비동기 처리</li><li><strong>정확도 향상</strong>: 다양한 검색 알고리즘, 재순위화</li><li><strong>보안 강화</strong>: 접근 제어, 데이터 암호화</li></ol></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">수정일: </span><time class="meta-item-info" datetime="2025-08-27T00:04:02.000Z" data-allow-mismatch>25. 8. 27. 오전 12:04</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">작성자: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: poh@empasy.com">poh</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><!----><a class="route-link auto-link next" href="/study/qwen2vlfinetuning.html" aria-label="Qwen2 VL Fine-Tuning"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">Qwen2 VL Fine-Tuning</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-7b98sGgs.js" defer></script>
  </body>
</html>
