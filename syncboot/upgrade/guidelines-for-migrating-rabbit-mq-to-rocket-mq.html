<!doctype html>
<html lang="ko-KR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.22" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/images/logo.png"><meta name="author" content="The VuePress Team"><meta name="keywords" content="vuepress, vue, Documentation, Blog"><meta name="theme-color" content="#3eaf7c"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png"><link rel="mask-icon" href="/images/icons/safari-pinned-tab.svg" color="#3eaf7c"><meta name="msapplication-TileImage" content="/images/icons/mstile-150x150.png"><meta name="msapplication-TileColor" content="#3eaf7c"><meta name="application-name" content="VuePress Document templates"><meta name="mobile-web-app-capable" content="yes"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><title>RabbitMQ를 RocketMQ로 변경</title><meta name="description" content="The Empasy document">
    <link rel="preload" href="/assets/style-CZXcHujW.css" as="style"><link rel="stylesheet" href="/assets/style-CZXcHujW.css">
    <link rel="modulepreload" href="/assets/app-CU20V-HQ.js"><link rel="modulepreload" href="/assets/guidelines-for-migrating-rabbit-mq-to-rocket-mq.html-CoUa1ivC.js">
    
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/.vuepress/public/images/logo-dark.png" alt><!----></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Homepage"><!--[--><!--[--><!--]--><!--]-->Homepage<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/synceta/" aria-label="SyncETA"><!--[--><!--[--><!--]--><!--]-->SyncETA<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/syncboot/" aria-label="SyncBoot"><!--[--><!--[--><!--]--><!--]-->SyncBoot<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/synccms/" aria-label="SyncCms"><!--[--><!--[--><!--]--><!--]-->SyncCms<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/syncadmin/" aria-label="SyncAdmin"><!--[--><!--[--><!--]--><!--]-->SyncAdmin<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/yourusername/vuepress-template" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search for documents" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Homepage"><!--[--><!--[--><!--]--><!--]-->Homepage<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/synceta/" aria-label="SyncETA"><!--[--><!--[--><!--]--><!--]-->SyncETA<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/syncboot/" aria-label="SyncBoot"><!--[--><!--[--><!--]--><!--]-->SyncBoot<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/synccms/" aria-label="SyncCms"><!--[--><!--[--><!--]--><!--]-->SyncCms<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/syncadmin/" aria-label="SyncAdmin"><!--[--><!--[--><!--]--><!--]-->SyncAdmin<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/yourusername/vuepress-template" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">SyncBoot <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item" href="/syncboot/" aria-label="Summary"><!--[--><!--[--><!--]--><!--]-->Summary<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/syncboot/Introduction.html" aria-label="Introduction"><!--[--><!--[--><!--]--><!--]-->Introduction<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/syncboot/getting-started.html" aria-label="Getting Started"><!--[--><!--[--><!--]--><!--]-->Getting Started<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div><h1 id="rabbitmq를-rocketmq로-변경" tabindex="-1"><a class="header-anchor" href="#rabbitmq를-rocketmq로-변경"><span>RabbitMQ를 RocketMQ로 변경</span></a></h1><blockquote><p>SyncBoot v3.6.4+<br> currently only supports rocketmq 4.x, not rocketmq 5.x</p></blockquote><h4 id="document" tabindex="-1"><a class="header-anchor" href="#document"><span>document</span></a></h4><p><a href="https://dist.apache.org/repos/dist/release/rocketmq/4.9.5" target="_blank" rel="noopener noreferrer">1 rocketmq deployment file</a><br><a href="https://rocketmq.apache.org/zh/docs/4.x/introduction/02quickstart" target="_blank" rel="noopener noreferrer">2 rocketmq deployment document</a></p><h4 id="dependency-reference" tabindex="-1"><a class="header-anchor" href="#dependency-reference"><span>Dependency Reference</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">&lt;dependency&gt;</span>
<span class="line">    &lt;groupId&gt;org.jeecgframework.boot&lt;/groupId&gt;</span>
<span class="line">    &lt;artifactId&gt;jeecg-cloud-test-rocketmq&lt;/artifactId&gt;</span>
<span class="line">    &lt;version&gt;${jeecgboot.version}&lt;/version&gt;</span>
<span class="line">&lt;/dependency&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><h4 id="add-configuration" tabindex="-1"><a class="header-anchor" href="#add-configuration"><span>Add Configuration</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">rocketmq:</span>
<span class="line">  name-server: jeecg-boot-rocketmq:9876</span>
<span class="line">  producer:</span>
<span class="line">    group: jeecg-group</span>
<span class="line">    sendMessageTimeout: 300000</span>
<span class="line">    tls-enable: false</span>
<span class="line">spring:</span>
<span class="line">  cloud:</span>
<span class="line">    stream:</span>
<span class="line">      rocketmq:</span>
<span class="line">        binder:</span>
<span class="line">          name-server: ${rocketmq.name-server} # RocketMQ Namesrv 地址</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><h4 id="convert-rabbitmq-to-rocketmq" tabindex="-1"><a class="header-anchor" href="#convert-rabbitmq-to-rocketmq"><span>Convert rabbitmq to rocketmq</span></a></h4><blockquote><p>Considering the amount of code modification required for the migration switch, the client encapsulated in rocketmq-starter has the same name as the original rabbitmq-starter client, RabbitMqClient, and the package structure is also consistent, which minimizes the workload generated during migration.</p></blockquote><h5 id="normal-message-occurs" tabindex="-1"><a class="header-anchor" href="#normal-message-occurs"><span>Normal message occurs</span></a></h5><p>原rabbitmq</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">@Autowired</span>
<span class="line">private RabbitMqClient rabbitMqClient;</span>
<span class="line"></span>
<span class="line">rabbitMqClient.sendMessage(CloudConstant.MQ_JEECG_PLACE_ORDER, map);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><p>Migrate to RocketMQ</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">@Autowired</span>
<span class="line">private RabbitMqClient rabbitMqClient;</span>
<span class="line"></span>
<span class="line">rabbitMqClient.sendMessage(CloudConstant.MQ_JEECG_PLACE_ORDER, map);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><h5 id="send-delayed-message" tabindex="-1"><a class="header-anchor" href="#send-delayed-message"><span>Send Delayed Message</span></a></h5><p>原rabbitmq</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">@Autowired</span>
<span class="line">private RabbitMqClient rabbitMqClient;</span>
<span class="line"></span>
<span class="line">// 延迟10秒</span>
<span class="line">rabbitMqClient.sendMessage(CloudConstant.MQ_JEECG_PLACE_ORDER_TIME, map,10);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><p>Migrate to RocketMQ</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">@Autowired</span>
<span class="line">private RabbitMqClient rabbitMqClient;</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 延迟消息， delayLevel取如下列表中的值</span>
<span class="line">     * Level 1: 1s（1秒）</span>
<span class="line">     * Level 2: 5s（5秒）</span>
<span class="line">     * Level 3: 10s（10秒）</span>
<span class="line">     * Level 4: 30s（30秒）</span>
<span class="line">     * Level 5: 1m（1分钟）</span>
<span class="line">     * Level 6: 2m（2分钟）</span>
<span class="line">     * Level 7: 3m（3分钟）</span>
<span class="line">     * Level 8: 4m（4分钟）</span>
<span class="line">     * Level 9: 5m（5分钟）</span>
<span class="line">     * Level 10: 6m（6分钟）</span>
<span class="line">     * Level 11: 7m（7分钟）</span>
<span class="line">     * Level 12: 8m（8分钟）</span>
<span class="line">     * Level 13: 9m（9分钟）</span>
<span class="line">     * Level 14: 10m（10分钟）</span>
<span class="line">     * Level 15: 20m（20分钟）</span>
<span class="line">     * Level 16: 30m（30分钟）</span>
<span class="line">     * Level 17: 1h（1小时）</span>
<span class="line">     * Level 18: 2h（2小时）</span>
<span class="line">     */</span>
<span class="line">rabbitMqClient.sendMessage(CloudConstant.MQ_JEECG_PLACE_ORDER_TIME, map,2);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><h5 id="bus-message-occurs" tabindex="-1"><a class="header-anchor" href="#bus-message-occurs"><span>Bus message occurs</span></a></h5><p>原rabbitmq</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">@Autowired</span>
<span class="line">private RabbitMqClient rabbitMqClient;</span>
<span class="line"></span>
<span class="line">//rabbitmq消息总线测试</span>
<span class="line">BaseMap params = new BaseMap();</span>
<span class="line">params.put(&quot;orderId&quot;, &quot;123456&quot;);</span>
<span class="line">rabbitMqClient.publishEvent(CloudConstant.MQ_DEMO_BUS_EVENT, params);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><p>Migrate to RocketMQ</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">@Autowired</span>
<span class="line">private RabbitMqClient rabbitMqClient;</span>
<span class="line"></span>
<span class="line">//rocketmq消息总线测试</span>
<span class="line">BaseMap params = new BaseMap();</span>
<span class="line">params.put(&quot;orderId&quot;, &quot;123456&quot;);</span>
<span class="line">rabbitMqClient.publishEvent(CloudConstant.MQ_DEMO_BUS_EVENT, params);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><h5 id="normal-message-monitoring-delayed-message-monitoring" tabindex="-1"><a class="header-anchor" href="#normal-message-monitoring-delayed-message-monitoring"><span>Normal message monitoring/delayed message monitoring</span></a></h5><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">@RabbitListener(queues = CloudConstant.MQ_JEECG_PLACE_ORDER) // 监听队列名称</span>
<span class="line">@RabbitComponent(value = &quot;helloReceiver1&quot;)</span>
<span class="line">public class HelloReceiver1 extends BaseRabbiMqHandler&lt;BaseMap&gt; {</span>
<span class="line"></span>
<span class="line">    @Autowired</span>
<span class="line">    private  RestTemplate restTemplate;</span>
<span class="line"></span>
<span class="line">    @RabbitHandler</span>
<span class="line">    public void onMessage(BaseMap baseMap, Channel channel, @Header(AmqpHeaders.DELIVERY_TAG) long deliveryTag) {</span>
<span class="line">        super.onMessage(baseMap, deliveryTag, channel, new MqListener&lt;BaseMap&gt;() {</span>
<span class="line">            @Override</span>
<span class="line">            public void handler(BaseMap map, Channel channel) {</span>
<span class="line">                //业务处理</span>
<span class="line">                String orderId = map.get(&quot;orderId&quot;).toString();</span>
<span class="line">                log.info(&quot;【我是处理人1】 MQ Receiver1，orderId : &quot; + orderId);</span>
<span class="line">            }</span>
<span class="line">        });</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><p>Migrate to RocketMQ</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">@Component</span>
<span class="line">// 监听topic名称，消费组</span>
<span class="line">@RocketMQMessageListener(topic = CloudConstant.MQ_JEECG_PLACE_ORDER, consumerGroup = &quot;helloReceiver1&quot;)</span>
<span class="line">public class HelloReceiver1 implements RocketMQListener&lt;BaseMap&gt; {</span>
<span class="line"></span>
<span class="line">    public void onMessage(BaseMap baseMap) {</span>
<span class="line">        log.info(&quot;helloReceiver1接收消息：&quot; + baseMap);</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><h5 id="bus-message-monitoring" tabindex="-1"><a class="header-anchor" href="#bus-message-monitoring"><span>Bus message monitoring</span></a></h5><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">@Component(CloudConstant.MQ_DEMO_BUS_EVENT)</span>
<span class="line">public class DemoBusEvent implements JeecgBusEventHandler {</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    @Override</span>
<span class="line">    public void onMessage(EventObj obj) {</span>
<span class="line">        if (ObjectUtil.isNotEmpty(obj)) {</span>
<span class="line">            BaseMap baseMap = obj.getBaseMap();</span>
<span class="line">            String orderId = baseMap.get(&quot;orderId&quot;);</span>
<span class="line">            log.info(&quot;业务处理----订单ID:&quot; + orderId);</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><p>Migrate to RocketMQ</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">@Component(CloudConstant.MQ_DEMO_BUS_EVENT)</span>
<span class="line">public class DemoBusEvent implements JeecgBusEventHandler {</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    @Override</span>
<span class="line">    public void onMessage(EventObj obj) {</span>
<span class="line">        if (ObjectUtil.isNotEmpty(obj)) {</span>
<span class="line">            BaseMap baseMap = obj.getBaseMap();</span>
<span class="line">            String orderId = baseMap.get(&quot;orderId&quot;);</span>
<span class="line">            log.info(&quot;业务处理----订单ID:&quot; + orderId);</span>
<span class="line">        }</span>
<span class="line">    }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><p>So far, all the content that needs to be migrated has been explained. Except for the monitoring and consumption of normal messages/delayed messages, other operations do not need to be modified.</p><h4 id="rocketmq-consumer-group" tabindex="-1"><a class="header-anchor" href="#rocketmq-consumer-group"><span>rocketmq consumer group</span></a></h4><p>In the monitoring consumption annotation <code>@RocketMQMessageListener</code>, in addition to topic, there is a mandatory parameter consumeGroup, the consumer group name. RocketMQ does not provide consumer group configuration by default, and you need to specify the consumer group name yourself. However, in the monitoring consumption annotation, there is a configuration that meets the common message scenario, so you only need to specify a consumer name. You can also specify <code>rocketmq.consumer</code>the configuration of the consumer group to <code>rocketmq.consumer.group</code>match the consumerGroup name in the annotation to use the consumption configuration in the configuration file. Configurations with different group names are not shared. The following configuration is the configuration for multiple consumer groups to consume a topic</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">@RocketMQMessageListener(topic = CloudConstant.MQ_JEECG_PLACE_ORDER, consumerGroup = &quot;helloReceiver1&quot;)</span>
<span class="line"></span>
<span class="line">@RocketMQMessageListener(topic = CloudConstant.MQ_JEECG_PLACE_ORDER, consumerGroup = &quot;helloReceiver2&quot;)</span>
<span class="line"></span>
<span class="line">@RocketMQMessageListener(topic = CloudConstant.MQ_JEECG_PLACE_ORDER, consumerGroup = &quot;helloReceiver3&quot;)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><h4 id="rocketmq-production-group" tabindex="-1"><a class="header-anchor" href="#rocketmq-production-group"><span>rocketmq production group</span></a></h4><p>Currently, production configuration only supports <code>rocketmq.produce</code>configuration. If multiple production groups are required, the production group names between different applications can be modified.</p><h4 id="rocketmq-client-api" tabindex="-1"><a class="header-anchor" href="#rocketmq-client-api"><span>RocketMQ Client API</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">   /**</span>
<span class="line">     * 同步发送</span>
<span class="line">     * @param topic</span>
<span class="line">     * @param payload</span>
<span class="line">     */</span>
<span class="line">    public void sendMessage(String topic, Object payload)</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 同步批量发送</span>
<span class="line">     * @param topic</span>
<span class="line">     * @param payload</span>
<span class="line">     * @return</span>
<span class="line">     * @param &lt;T&gt;</span>
<span class="line">     */</span>
<span class="line">    public &lt;T&gt; SendResult sendMessage(String topic, Collection&lt;T&gt; payload)</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 异步发送</span>
<span class="line">     * @param topic</span>
<span class="line">     * @param payload</span>
<span class="line">     * @param callback</span>
<span class="line">     */</span>
<span class="line">    public void sendAsyncMessage(String topic, Object payload, SendCallback callback)</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 异步批量发送</span>
<span class="line">     * @param topic</span>
<span class="line">     * @param payload</span>
<span class="line">     * @param sendCallback</span>
<span class="line">     * @param &lt;T&gt;</span>
<span class="line">     */</span>
<span class="line">    public &lt;T&gt; void sendAsyncMessage(String topic, Collection&lt;T&gt; payload, SendCallback sendCallback)</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 同步发送顺序消息</span>
<span class="line">     * @param topic</span>
<span class="line">     * @param payload</span>
<span class="line">     * @param hashKey</span>
<span class="line">     */</span>
<span class="line">    public void sendOrderlyMessage(String topic, Object payload, String hashKey)</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 异步发送顺序消息</span>
<span class="line">     * @param topic</span>
<span class="line">     * @param payload</span>
<span class="line">     * @param hashKey</span>
<span class="line">     * @param callback</span>
<span class="line">     */</span>
<span class="line">    public void sendAsyncOrderlyMessage(String topic, Object payload, String hashKey, SendCallback callback)</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * Oneway消息</span>
<span class="line">     * @param topic</span>
<span class="line">     * @param payload</span>
<span class="line">     */</span>
<span class="line">    public void sendOneway(String topic, Object payload)</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 顺序Oneway消息</span>
<span class="line">     * @param topic</span>
<span class="line">     * @param payload</span>
<span class="line">     * @param hashKey</span>
<span class="line">     */</span>
<span class="line">    public void sendOnewayOrderly(String topic, Object payload, String hashKey)</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 事务消息</span>
<span class="line">     * @param topic</span>
<span class="line">     * @param payload</span>
<span class="line">     * @param arg</span>
<span class="line">     */</span>
<span class="line">    public void sendMessageInTransaction(String topic, Object payload, Object arg)</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * pull模式</span>
<span class="line">     * 拉取消息</span>
<span class="line">     * @param clazz</span>
<span class="line">     * @return</span>
<span class="line">     * @param &lt;T&gt;</span>
<span class="line">     */</span>
<span class="line">    public &lt;T&gt; List&lt;T&gt; receive(Class&lt;T&gt; clazz)</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 延迟消息， delayLevel取如下列表中的值，等后续rocket-spring升到2.3.0时，可以设置延迟多少秒，目前适配版本只能设置延迟等级</span>
<span class="line">     * Level 1: 1s（1秒）</span>
<span class="line">     * Level 2: 5s（5秒）</span>
<span class="line">     * Level 3: 10s（10秒）</span>
<span class="line">     * Level 4: 30s（30秒）</span>
<span class="line">     * Level 5: 1m（1分钟）</span>
<span class="line">     * Level 6: 2m（2分钟）</span>
<span class="line">     * Level 7: 3m（3分钟）</span>
<span class="line">     * Level 8: 4m（4分钟）</span>
<span class="line">     * Level 9: 5m（5分钟）</span>
<span class="line">     * Level 10: 6m（6分钟）</span>
<span class="line">     * Level 11: 7m（7分钟）</span>
<span class="line">     * Level 12: 8m（8分钟）</span>
<span class="line">     * Level 13: 9m（9分钟）</span>
<span class="line">     * Level 14: 10m（10分钟）</span>
<span class="line">     * Level 15: 20m（20分钟）</span>
<span class="line">     * Level 16: 30m（30分钟）</span>
<span class="line">     * Level 17: 1h（1小时）</span>
<span class="line">     * Level 18: 2h（2小时）</span>
<span class="line">     * @param topic</span>
<span class="line">     * @param payload</span>
<span class="line">     * @param delayLevel</span>
<span class="line">     * @return</span>
<span class="line">     */</span>
<span class="line">    public SendResult sendMessage(String topic, Object payload, Integer delayLevel)</span>
<span class="line"></span>
<span class="line">    /**</span>
<span class="line">     * 发送远程事件</span>
<span class="line">     *</span>
<span class="line">     * @param handlerName</span>
<span class="line">     * @param baseMap</span>
<span class="line">     */</span>
<span class="line">    public void publishEvent(String handlerName, BaseMap baseMap)</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/yourusername/vuepress-template/edit/main/docs/syncboot/upgrade/guidelines-for-migrating-rabbit-mq-to-rocket-mq.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]--><!--]-->Edit this page on GitHub<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last updated: </span><time class="meta-item-info" datetime="2025-06-09T22:25:09.000Z" data-allow-mismatch>25. 6. 9. 오후 10:25</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: poh@empasy.com">poh</span><!----><!--]--><!--]--></span></div></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CU20V-HQ.js" defer></script>
  </body>
</html>
