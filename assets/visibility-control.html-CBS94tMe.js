import{_ as s,c as n,a,o as i}from"./app-DeddRHAy.js";const l={};function t(o,e){return i(),n("div",null,e[0]||(e[0]=[a(`<h1 id="visibility-control✔" tabindex="-1"><a class="header-anchor" href="#visibility-control✔"><span>Visibility control✔</span></a></h1><blockquote><p>Implementing form display and hiding</p></blockquote><h2 id="basicform" tabindex="-1"><a class="header-anchor" href="#basicform"><span>BasicForm</span></a></h2><h3 id="_1-usage" tabindex="-1"><a class="header-anchor" href="#_1-usage"><span>1. Usage:</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">import { usePermission } from &#39;/@/hooks/web/usePermission&#39;;</span>
<span class="line">const { hasPermission } = usePermission();</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><p>The hasPermission function receives the background permission code and can pass an array hasPermission ([&#39;user &#39;])</p><h3 id="how-to-use-baseform" tabindex="-1"><a class="header-anchor" href="#how-to-use-baseform"><span>How to use BaseForm</span></a></h3><h4 id="show-mode-control" tabindex="-1"><a class="header-anchor" href="#show-mode-control"><span>Show mode control</span></a></h4><ul><li><strong><a href="https://vvbin.cn/doc-next/components/form.html#formschema" target="_blank" rel="noopener noreferrer">The show</a> attribute is used to dynamically determine whether the current component is displayed. It is controlled by CSS and will not delete the DOM.</strong></li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line"></span>
<span class="line">{</span>
<span class="line">  field: &#39;field1&#39;,</span>
<span class="line">  component: &#39;Input&#39;,</span>
<span class="line">  label: &#39;字段1&#39;,</span>
<span class="line">  show: ({ values }) =&gt; {</span>
<span class="line">    return hasPermission(&#39;user:add&#39;);</span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><h4 id="ifshow-mode-control" tabindex="-1"><a class="header-anchor" href="#ifshow-mode-control"><span>ifShow mode control</span></a></h4><ul><li><strong>Dynamically determine whether the current component is displayed through <a href="https://vvbin.cn/doc-next/components/form.html#formschema" target="_blank" rel="noopener noreferrer">the ifShow</a> attribute, js control, and delete the dom</strong></li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">{</span>
<span class="line">  field: &#39;field2&#39;,</span>
<span class="line">  component: &#39;Input&#39;,</span>
<span class="line">  label: &#39;字段2&#39;,</span>
<span class="line">  ifShow: ({ values }) =&gt; {</span>
<span class="line">     return hasPermission(&#39;user:add&#39;);</span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><h4 id="v-auth-visibility-control" tabindex="-1"><a class="header-anchor" href="#v-auth-visibility-control"><span>v-auth (visibility control)</span></a></h4><p><code>demo:order:auth 标识来源于系统菜单创建的按钮。然后通过角色授权控制该表单项在哪些角色下可见。v3.6.4+</code></p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">{</span>
<span class="line">    field: &#39;orderAuth&#39;,</span>
<span class="line">    component: &#39;Input&#39;,</span>
<span class="line">    label: &#39;指令权限&#39;,</span>
<span class="line">    helpMessage: [&#39;有权限右侧的&quot;选中值&quot;可见，否则不可见&#39;],</span>
<span class="line">    colProps: {</span>
<span class="line">      span: 12,</span>
<span class="line">    },</span>
<span class="line">  },</span>
<span class="line">  {</span>
<span class="line">    field: &#39;orderAuth&#39;,</span>
<span class="line">    auth: &#39;demo:order:auth&#39;,</span>
<span class="line">    component: &#39;JEllipsis&#39;,</span>
<span class="line">    label: &#39;选中值&#39;,</span>
<span class="line">    colProps: { span: 12 },</span>
<span class="line">  },</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><h4 id="how-to-use-the-slot" tabindex="-1"><a class="header-anchor" href="#how-to-use-the-slot"><span>How to use the slot</span></a></h4><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">&lt;template #jSelectUser=&quot;{model, field }&quot;&gt;</span>
<span class="line">    &lt;JSelectUser v-model:value=&quot;model[field]&quot; v-if=&quot;hasPermission(&#39;user:add&#39;)&quot;/&gt;</span>
<span class="line">&lt;/template&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>copy</p><h3 id="_2-permission-configuration" tabindex="-1"><a class="header-anchor" href="#_2-permission-configuration"><span>2. Permission configuration:</span></a></h3><h4 id="_1-configure-buttons-permissions" tabindex="-1"><a class="header-anchor" href="#_1-configure-buttons-permissions"><span>1. Configure buttons/permissions</span></a></h4><p><img src="https://lfs.k.topthink.com/lfs/879fcd9a1d3e3e1a047abf6e1b6ced0dda6291684ed00010af03eb1f599cf624.dat" alt=""></p><h4 id="_2-role-authorization" tabindex="-1"><a class="header-anchor" href="#_2-role-authorization"><span>2. Role authorization</span></a></h4><p><img src="https://lfs.k.topthink.com/lfs/11727b7f481fd56361c10fd4081eff96250aae6e021f950fc24cd463da5ce9b2.dat" alt=""></p><h3 id="_3-instructions" tabindex="-1"><a class="header-anchor" href="#_3-instructions"><span>3. Instructions</span></a></h3><ol><li><code>hasPermission(&#39;user:add&#39;)</code> The command value &quot;name&quot; is the authorization ID, which can be used to control &quot;display/access&quot;</li><li>Permission coding is configured in [System Management--Menu Management], add menu data of button type, configure the authorization identifier value <code>user:add</code>, select display/access for strategy, and select valid for status</li></ol><h5 id="control-rules" tabindex="-1"><a class="header-anchor" href="#control-rules"><span>Control rules:</span></a></h5><ul><li>After use <code>hasPermission</code>, if there is no configuration corresponding to the command code in the menu permissions, the control will not be displayed</li><li>Policy: Display/access, not displayed when not authorized, displayed after authorization</li><li>Flexible: One authorization identification code can control multiple controls and can also be used to control list column fields (please use it flexibly)</li></ul><h3 id="_4-page-effect" tabindex="-1"><a class="header-anchor" href="#_4-page-effect"><span>4. Page Effect</span></a></h3><p>未配置角色权限<br><img src="https://lfs.k.topthink.com/lfs/85450044627c707df1abe57cbf4993fb2d0887cdd98a14e2761cd72b7f00edb0.dat" alt=""></p><p>配置角色权限<br><img src="https://lfs.k.topthink.com/lfs/fb3e7b8a704deb04091a4c3462c30ea7e1e1fd494680c55f2db1a9c3af076d3d.dat" alt=""></p><h2 id="native-forms" tabindex="-1"><a class="header-anchor" href="#native-forms"><span>Native Forms</span></a></h2><p>Using <code>v-auth</code>directives and <code>isDisabledAuth()</code>functions</p><h3 id="example" tabindex="-1"><a class="header-anchor" href="#example"><span>Example:</span></a></h3><p>1. Display and hide control fields<br><img src="https://lfs.k.topthink.com/lfs/c74646d6125863ff1fa8ce9c3610f063d37a085f28856369ea03b6d2ed6ee72f.dat" alt=""></p><p>2. Disable control fields<br><img src="https://lfs.k.topthink.com/lfs/87ceb6b702e651e731e71817190da9743c63f92c52da9e644ef3e6a3bbe5d941.dat" alt=""></p><p>3. Special case handling<br> If you set hidden permissions for required fields, the fields will be hidden, but the verification problem still exists. The cause of this problem is the rendering order of the form.</p><p>Solution: To solve this problem, you cannot just use <code>v-auth</code>the form to control the form. You also need to dynamically set the required check of the form to false through coding. Setting rules to computed properties can achieve better performance.</p>`,42)]))}const d=s(l,[["render",t]]),c=JSON.parse('{"path":"/syncadmin/front-end-permissions/form-permissions/visibility-control.html","title":"Visibility control✔","lang":"ko-KR","frontmatter":{"order":2},"git":{"updatedTime":1749179241000,"contributors":[{"name":"poh","username":"poh","email":"poh@empasy.com","commits":1,"url":"https://github.com/poh"}],"changelog":[{"hash":"a96cbbf1f6c96d0e9d6bafa4174131f10429b849","time":1749179241000,"email":"poh@empasy.com","author":"poh","message":"sync 제품군 추가"}]},"filePathRelative":"syncadmin/front-end-permissions/form-permissions/visibility-control.md"}');export{d as comp,c as data};
