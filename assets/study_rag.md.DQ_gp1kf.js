import{_ as i,c as a,o as n,ah as t}from"./chunks/framework.C925sJaN.js";const d=JSON.parse('{"title":"RAG","description":"까먹지 말고 재밌게 저장하자! 🎯 공부한 내용을 자유롭게 기록하는 즐거운 지식 저장소","frontmatter":{"title":"RAG","description":"까먹지 말고 재밌게 저장하자! 🎯 공부한 내용을 자유롭게 기록하는 즐거운 지식 저장소","head":[["meta",{"name":"keywords","content":"공부기록, 학습일기, 지식저장소, 공부로그, 학습관리, 공부노트, 지식정리, 공부방법, 학습저장, 기억보조"}],["meta",{"property":"og:title","content":"📚 두뇌 저장소 - 재미있는 공부 기록 놀이터"}],["meta",{"property":"og:description","content":"까먹지 말고 재밌게 저장하자! 🎯 공부한 내용을 자유롭게 기록하는 즐거운 지식 저장소"}],["meta",{"property":"og:image","content":"https://doc.empasy.com/images/favicon.png"}],["meta",{"property":"og:url","content":"https://doc.empasy.com/study/"}]],"sort":300},"headers":[],"relativePath":"study/rag.md","filePath":"ko/study/rag.md","lastUpdated":1760248054000}'),l={name:"study/rag.md"};function h(k,s,p,e,r,E){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h2 id="rag-랙-구축-완벽-가이드-초보자를-위한-친절한-설명서" tabindex="-1"><strong>RAG(랙) 구축 완벽 가이드: 초보자를 위한 친절한 설명서</strong> <a class="header-anchor" href="#rag-랙-구축-완벽-가이드-초보자를-위한-친절한-설명서" aria-label="Permalink to “RAG(랙) 구축 완벽 가이드: 초보자를 위한 친절한 설명서”">​</a></h2><h3 id="목차" tabindex="-1"><strong>목차</strong> <a class="header-anchor" href="#목차" aria-label="Permalink to “목차”">​</a></h3><ol><li><a href="#_1-rag가-뭔가요-쉬운-비유로-이해하기">RAG가 뭔가요? 쉬운 비유로 이해하기</a></li><li><a href="#_2-왜-rag가-필요할까요">왜 RAG가 필요할까요?</a></li><li><a href="#_3-rag를-구축하려면-무엇이-필요할까요-준비물">RAG를 구축하려면 무엇이 필요할까요? (준비물)</a></li><li><a href="#_4-rag-구축-5단계-따라만-하면-됩니다">RAG 구축 5단계: 따라만 하면 됩니다!</a></li><li><a href="#_5-어떤-도구들을-사용하면-좋을까요">어떤 도구들을 사용하면 좋을까요?</a></li></ol><hr><h3 id="_1-rag가-뭔가요-쉬운-비유로-이해하기" tabindex="-1"><strong>1. RAG가 뭔가요? 쉬운 비유로 이해하기</strong> <a class="header-anchor" href="#_1-rag가-뭔가요-쉬운-비유로-이해하기" aria-label="Permalink to “1. RAG가 뭔가요? 쉬운 비유로 이해하기”">​</a></h3><p><strong>RAG(Retrieval-Augmented Generation)</strong> 는 <strong>&quot;정보 검색(Retrieval) + 답변 생성(Generation)&quot;</strong> 을 합친 기술입니다.</p><ul><li><strong><code>R</code>(Retrieval - 검색)</strong>: 방대한 문서 더미에서 <strong>질문과 관련된 정보를 찾아오는</strong> 단계</li><li><strong><code>AG</code>(Augmented Generation - 향상된 생성)</strong>: 찾아온 정보를 바탕으로 <strong>LLM이 정확한 답변을 생성하는</strong> 단계</li></ul><h4 id="🛎️-쉬운-비유-열심히-하는-비서님" tabindex="-1"><strong>🛎️ 쉬운 비유: 열심히 하는 비서님</strong> <a class="header-anchor" href="#🛎️-쉬운-비유-열심히-하는-비서님" aria-label="Permalink to “🛎️ 쉬운 비유: 열심히 하는 비서님”">​</a></h4><p>여러분에게 <strong><code>A</code></strong> 와 <strong><code>B</code></strong> , 두 명의 비서가 있다고 상상해보세요.</p><ul><li><p><strong>비서 A (일반적인 LLM)</strong>: 머리가 엄청 좋아서 수많은 책을 읽었습니다. 하지만 가끔 <strong>잊어버리거나, 최신 정보를 모를 때가 있습니다.</strong> 그리고 가끔 <strong>&quot;있어 보이는&quot; 말을 지어내기도(Hallucination) 합니다.</strong></p></li><li><p><em>&quot;2024년 한국 축구 국가대표팀 감독이 누구예요?&quot;</em></p></li><li><p><em>&quot;음... 클린스만... 인가? 아니면 홍명보...? (확신 없음 또는 잘못된 답변)&quot;</em></p></li><li><p><strong>비서 B (RAG를 사용하는 LLM)</strong>: 비서 A만큼 머리는 좋지만, <strong>옆에 완벽한 자료실이 있습니다.</strong> 여러분이 질문하면,</p></li></ul><ol><li>먼저 <strong>자료실(DB)로 뛰어가서</strong> 최신 뉴스, 회사 문서, 보고서 등 <strong>관련 자료를 찾아옵니다. (Retrieval)</strong></li><li>찾아온 자료를 비서 A에게 건네주면서 <strong>&quot;자, 이 자료 보면서 답변해&quot;</strong> 라고 합니다.</li><li>비서 A는 <strong>정확한 자료를 바탕으로</strong> 자신있게 답변합니다. <strong>(Augmented Generation)</strong></li></ol><ul><li><em>&quot;2024년 한국 축구 국가대표팀 감독이 누구예요?&quot;</em></li><li><em>&quot;(자료실에서 &#39;2024년 3월, 대한축구협회, 황선홍 감독 선임&#39; 기사를 찾아옴)&quot;</em></li><li><em>&quot;네, 2024년 현재 한국 축구 국가대표팀 감독은 황선홍 감독입니다. 관련 기사 내용은 다음과 같습니다...&quot;</em></li></ul><p><strong>결론: RAG는 LLM에게 &#39;정확한 자료&#39;를 먼저 찾아주어 더 신뢰할 수 있는 답변을 만들게 해주는 &#39;똑똑한 비서 시스템&#39;입니다.</strong></p><hr><h3 id="_2-왜-rag가-필요할까요" tabindex="-1"><strong>2. 왜 RAG가 필요할까요?</strong> <a class="header-anchor" href="#_2-왜-rag가-필요할까요" aria-label="Permalink to “2. 왜 RAG가 필요할까요?”">​</a></h3><p>일반적인 LLM(예: ChatGPT)의 <strong>단점을 해결</strong>해 줍니다.</p><ol><li><strong>최신 정보 부족</strong>: LLM은 학습이 끊긴 시점의 데이터만 알고 있습니다. RAG는 실시간 문서를 제공해 최신 정보로 답변하게 합니다.</li><li><strong>망상(Hallucination)</strong>: 없는 사실을 지어낼 때가 있습니다. RAG는 <strong>&#39;근거 자료&#39;</strong> 를 제공해 이를 방지합니다.</li><li><strong>내부 정보 활용 불가</strong>: 회사의 매뉴얼, 계약서, 메일 등 <strong>비공개 문서를 LLM이 알지 못합니다.</strong> RAG는 이 내부 문서들을 자료실에 넣어 활용하게 합니다.</li><li><strong>투명성과 신뢰성</strong>: 답변의 출처(어떤 문서의 몇 페이지)를 제공해 <strong>&quot;왜 그렇게 답변했는지&quot;</strong> 확인이 가능합니다.</li></ol><hr><h3 id="_3-rag를-구축하려면-무엇이-필요할까요-준비물" tabindex="-1"><strong>3. RAG를 구축하려면 무엇이 필요할까요? (준비물)</strong> <a class="header-anchor" href="#_3-rag를-구축하려면-무엇이-필요할까요-준비물" aria-label="Permalink to “3. RAG를 구축하려면 무엇이 필요할까요? (준비물)”">​</a></h3><p>크게 4가지 구성 요소가 필요합니다.</p><ol><li><strong>지식(Knowledge) / 문서 데이터</strong>: 답변의 근거가 될 <strong>내부 문서들</strong> (PDF, HWP, Word, Excel, PPT, 웹페이지, DB 등)</li><li><strong>임베딩 모델(Embedding Model)</strong>: 문서의 <strong>&#39;의미&#39;를 숫자로 변환</strong>해주는 AI. 비유하자면 <strong>&#39;문서를 컴퓨터가 이해할 수 있는 바코드(벡터)로 만들어주는 스캐너&#39;</strong> 입니다.</li><li><strong>벡터 데이터베이스(Vector DB)</strong>: 그 &#39;바코드(벡터)&#39;들을 <strong>저장하고, 빠르게 검색할 수 있는</strong> 특별한 DB. <strong>&#39;초고속 정리된 자료실&#39;</strong> 이라고 생각하세요.</li><li><strong>LLM(Large Language Model)</strong>: 최종적으로 <strong>답변을 생성하는</strong> AI. (예: GPT-4, Claude, Llama2 등)</li></ol><hr><h3 id="_4-rag-구축-5단계-따라만-하면-됩니다" tabindex="-1"><strong>4. RAG 구축 5단계: 따라만 하면 됩니다!</strong> <a class="header-anchor" href="#_4-rag-구축-5단계-따라만-하면-됩니다" aria-label="Permalink to “4. RAG 구축 5단계: 따라만 하면 됩니다!”">​</a></h3><p>전체 과정은 <strong>&#39;자료실 세팅&#39;</strong> 과 <strong>&#39;질문-답변&#39;</strong> 두 파트로 나눌 수 있습니다.</p><div class="language-mermaid"><button title="Copy code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">flowchart TD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph A [자료실 세팅 과정 배치 작업]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        direction LR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        A1[문서 수집 및 전처리] --&gt; A2[임베딩 모델로&lt;br&gt;문서를 벡터로 변환] --&gt; A3[벡터 DB에 저장]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph B [사용자 질의-응답 과정 실시간]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        direction LR</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        B1[사용자 질문] --&gt; B2[동일 임베딩 모델로&lt;br&gt;질문을 벡터로 변환]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        B2 -- 유사도 검색 --&gt; B3[벡터 DB에서&lt;br&gt;관련 문서 검색]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        B3 -- 검색된 문서를&lt;br&gt;답변 근거로 제공 --&gt; B4[LLM이 최종 답변 생성]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        B4 --&gt; B5[사용자에게 답변 전달]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    A3 -.-&gt; B3</span></span></code></pre></div><h4 id="파트-1-자료실-세팅-한번-해두면-계속-사용" tabindex="-1"><strong>파트 1: 자료실 세팅 (한번 해두면 계속 사용)</strong> <a class="header-anchor" href="#파트-1-자료실-세팅-한번-해두면-계속-사용" aria-label="Permalink to “파트 1: 자료실 세팅 (한번 해두면 계속 사용)”">​</a></h4><p><strong>1단계: 문서 수집 및 전처리</strong></p><ul><li><strong>하는 일</strong>: PDF, Word 등 다양한 형식의 문서를 <strong>텍스트만 뽑아내서</strong> 정리합니다.</li><li><strong>세부 작업</strong>:</li><li><strong>텍스트 추출</strong>: 문서에서 글자만 뽑아냅니다.</li><li><strong>쪼개기(Chunking)</strong>: 100페이지짜리 문서를 통째로 넣으면 효율이 나쁩니다. <strong>의미가 통하는 단위(예: 3~5문단씩)</strong> 로 잘라줍니다. 이게 <strong>자료실의 한 장 한 장</strong>이 됩니다.</li><li><strong>정제</strong>: 불필요한 공백, 특수문자를 정리합니다.</li></ul><p><strong>2단계: 문서를 숫자(벡터)로 변환 (임베딩)</strong></p><ul><li><strong>하는 일</strong>: 쪼개놓은 텍스트 조각들을 <strong>임베딩 모델</strong>에 넣어 <strong>숫자 나열(벡터)</strong> 로 변환합니다. 의미가 비슷한 문서들은 비슷한 숫자 값을 가집니다.</li></ul><p><strong>3단계: 벡터 데이터베이스에 저장</strong></p><ul><li><strong>하는 일</strong>: 변환된 숫자들(벡터)과 원본 텍스트를 <strong>벡터 DB</strong>에 짝지어 저장합니다. 이제 <strong>&#39;의미 기반&#39;으로 검색할 수 있는 자료실</strong>이 완성되었습니다.</li></ul><h4 id="파트-2-질문-답변-사용자가-질문할-때마다-진행" tabindex="-1"><strong>파트 2: 질문-답변 (사용자가 질문할 때마다 진행)</strong> <a class="header-anchor" href="#파트-2-질문-답변-사용자가-질문할-때마다-진행" aria-label="Permalink to “파트 2: 질문-답변 (사용자가 질문할 때마다 진행)”">​</a></h4><p><strong>4단계: 질문을 숫자(벡터)로 변환 및 검색</strong></p><ul><li><strong>하는 일</strong>: 사용자의 질문도 <strong>똑같은 임베딩 모델</strong>을 이용해 숫자(벡터)로 변환합니다.</li><li>그런 다음, <strong>벡터 DB에서</strong> 이 질문의 벡터와 <strong>가장 유사한 벡터(즉, 가장 관련성 높은 문서)</strong> 를 찾아서 그 <strong>원본 텍스트를 꺼내옵니다.</strong></li></ul><p><strong>5단계: LLM이 최종 답변 생성</strong></p><ul><li><strong>하는 일</strong>: 다음과 같은 <strong>&#39;설명서(프롬프트)&#39;</strong> 와 함께 찾아온 문서들을 LLM에게 건넵니다.</li><li><em>&quot;당신은 유용한 Assistant입니다. 아래 [참고 문서] 내용만을 정확히 참고하여 사용자의 질문에 답변하세요. 모르는 건 모른다고 하세요.&quot;</em></li><li><code>[참고 문서]:</code> (4단계에서 찾아온 텍스트들)</li><li><code>[사용자 질문]:</code> &quot;우리 회사 휴가 규정은 어떻게 되나요?&quot;</li><li>LLM은 <strong>주어진 문서를 참조해서</strong> 정확하고 신뢰할 수 있는 답변을 생성합니다.</li></ul><hr><h3 id="_5-어떤-도구들을-사용하면-좋을까요" tabindex="-1"><strong>5. 어떤 도구들을 사용하면 좋을까요?</strong> <a class="header-anchor" href="#_5-어떤-도구들을-사용하면-좋을까요" aria-label="Permalink to “5. 어떤 도구들을 사용하면 좋을까요?”">​</a></h3><p>코딩 없이도 GUI로 쉽게 시작할 수 있는 도구들과, 본격적으로 개발할 때用的인 오픈소스 도구들을 소개합니다.</p><h4 id="초보자-비개발자-친화적-도구-low-code-no-code" tabindex="-1"><strong>초보자/비개발자 친화적 도구 (Low-Code/No-Code)</strong> <a class="header-anchor" href="#초보자-비개발자-친화적-도구-low-code-no-code" aria-label="Permalink to “초보자/비개발자 친화적 도구 (Low-Code/No-Code)”">​</a></h4><ul><li><strong>ChatPDF, AskYourPDF</strong>: 그냐 PDF 파일을 업로드하면 바로 질문할 수 있는 서비스. RAG의 가장 간단한 형태입니다.</li><li><strong>Microsoft Copilot Studio</strong>: 마이크로소프트 365 제품군 사용한다면, SharePoint나 Word 파일에 기반한 RAG 챗봇을 쉽게 만들 수 있습니다.</li><li><strong>Notion AI</strong>: 노션 workspace 내의 문서를 기반으로 답변.</li></ul><h4 id="본격적으로-개발하기-위한-오픈소스-도구들" tabindex="-1"><strong>본격적으로 개발하기 위한 오픈소스 도구들</strong> <a class="header-anchor" href="#본격적으로-개발하기-위한-오픈소스-도구들" aria-label="Permalink to “본격적으로 개발하기 위한 오픈소스 도구들”">​</a></h4><ul><li><strong>임베딩 모델</strong>: <code>all-MiniLM-L6-v2</code> (가볍고 좋음), <code>BGE</code>, <code>OpenAI의 text-embedding-3</code> (성능 좋음)</li><li><strong>벡터 DB</strong>: <code>Chroma</code> (가장 쉬움), <code>Weaviate</code>, <code>Qdrant</code>, <code>Pinecone</code> (클라우드 서비스)</li><li><strong>LLM</strong>: <code>OpenAI API (GPT-4)</code>, <code>Anthropic API (Claude)</code>, <code>Llama 3</code> (오픈소스)</li><li><strong>프레임워크</strong>: <code>LangChain</code>, <code>LlamaIndex</code> - RAG 시스템의 <strong>접착제</strong> 같은 역할. 위의 모든 요소들을 쉽게 연결하게 도와주는 파이썬 라이브러리입니다.</li></ul><p><strong>시작 추천 조합:</strong> <code>LangChain</code> + <code>Chroma DB</code> + <code>all-MiniLM-L6-v2</code> + <code>GPT-4 API</code> 조합이 학습하기에 좋습니다.</p><h1 id="rag-retrieval-augmented-generation-구축-가이드-java-개발자-샘플" tabindex="-1">RAG(Retrieval-Augmented Generation) 구축 가이드: Java 개발자 샘플 <a class="header-anchor" href="#rag-retrieval-augmented-generation-구축-가이드-java-개발자-샘플" aria-label="Permalink to “RAG(Retrieval-Augmented Generation) 구축 가이드: Java 개발자 샘플”">​</a></h1><h2 id="목차-1" tabindex="-1">목차 <a class="header-anchor" href="#목차-1" aria-label="Permalink to “목차”">​</a></h2><ol><li><a href="#_1-rag란-무엇인가">RAG란 무엇인가?</a></li><li><a href="#_2-rag의-필요성">RAG의 필요성</a></li><li><a href="#_3-rag-시스템-구성-요소">RAG 시스템 구성 요소</a></li><li><a href="#_4-java-기반-rag-구현-단계">Java 기반 RAG 구현 단계</a></li><li><a href="#_5-간단한-java-구현-예제">간단한 Java 구현 예제</a></li><li><a href="#_6-향후-발전-방향">향후 발전 방향</a></li></ol><hr><h2 id="_1-rag란-무엇인가" tabindex="-1">1. RAG란 무엇인가? <a class="header-anchor" href="#_1-rag란-무엇인가" aria-label="Permalink to “1. RAG란 무엇인가?”">​</a></h2><p>RAG(Retrieval-Augmented Generation)는 <strong>정보 검색(Retrieval)</strong> 과 <strong>답변 생성(Generation)</strong> 을 결합한 기술로, 대형 언어 모델(LLM)이 외부 지식 소스를 활용하여 더 정확하고 신뢰할 수 있는 답변을 생성할 수 있게 합니다.</p><h3 id="🎯-쉬운-비유-도서관-사서" tabindex="-1">🎯 쉬운 비유: 도서관 사서 <a class="header-anchor" href="#🎯-쉬운-비유-도서관-사서" aria-label="Permalink to “🎯 쉬운 비유: 도서관 사서”">​</a></h3><ul><li><strong>일반 LLM</strong>: 백과사전을 통째로 외운 천재 (但, 최신 정보 없고 가끔 틀림)</li><li><strong>RAG LLM</strong>: 도서관에서 관련 자료 찾아와 참고하며 답변하는 사서 (정확하고 최신 정보 제공)</li></ul><hr><h2 id="_2-rag의-필요성" tabindex="-1">2. RAG의 필요성 <a class="header-anchor" href="#_2-rag의-필요성" aria-label="Permalink to “2. RAG의 필요성”">​</a></h2><table tabindex="0"><thead><tr><th>문제점</th><th>일반 LLM</th><th>RAG 적용 시</th></tr></thead><tbody><tr><td>최신 정보 부족</td><td>❌ 학습 데이터에만 의존</td><td>✅ 실시간 정보 활용</td></tr><tr><td>망상(Hallucination)</td><td>❌ 가끔 지어냄</td><td>✅ 근거 자료 기반</td></tr><tr><td>내부 정보 활용</td><td>❌ 불가능</td><td>✅ 가능</td></tr><tr><td>투명성 부족</td><td>❌ 답변 근거 불명확</td><td>✅ 출처 명시 가능</td></tr></tbody></table><hr><h2 id="_3-rag-시스템-구성-요소" tabindex="-1">3. RAG 시스템 구성 요소 <a class="header-anchor" href="#_3-rag-시스템-구성-요소" aria-label="Permalink to “3. RAG 시스템 구성 요소”">​</a></h2><ol><li><strong>문서 저장소</strong>: PDF, Word, 내부 문서 등 원본 자료</li><li><strong>임베딩 모델</strong>: 텍스트 → 숫자 벡터 변환</li><li><strong>벡터 데이터베이스</strong>: 벡터 저장 및 유사도 검색</li><li><strong>LLM</strong>: 최종 답변 생성</li></ol><hr><h2 id="_4-java-기반-rag-구현-단계" tabindex="-1">4. Java 기반 RAG 구현 단계 <a class="header-anchor" href="#_4-java-기반-rag-구현-단계" aria-label="Permalink to “4. Java 기반 RAG 구현 단계”">​</a></h2><h3 id="단계-1-환경-설정-의존성-추가" tabindex="-1">단계 1: 환경 설정 (의존성 추가) <a class="header-anchor" href="#단계-1-환경-설정-의존성-추가" aria-label="Permalink to “단계 1: 환경 설정 (의존성 추가)”">​</a></h3><div class="language-xml"><button title="Copy code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- pom.xml --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.ai&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-ai-openai-spring-boot-starter&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;0.8.1&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.springframework.boot&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;spring-boot-starter-web&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- 벡터 DB 의존성 (선택 사항) --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependencies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="단계-2-문서-로드-및-분할" tabindex="-1">단계 2: 문서 로드 및 분할 <a class="header-anchor" href="#단계-2-문서-로드-및-분할" aria-label="Permalink to “단계 2: 문서 로드 및 분할”">​</a></h3><div class="language-java"><button title="Copy code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DocumentLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadAndSplitDocuments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">filePath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> chunkSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IOException {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Files.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readAllBytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Paths.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filePath)));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> splitTextIntoChunks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(content, chunkSize);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">splitTextIntoChunks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> chunkSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; chunks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> text.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            chunks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(text.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">substring</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i, Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">min</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunkSize, text.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunks;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="단계-3-텍스트-임베딩-생성" tabindex="-1">단계 3: 텍스트 임베딩 생성 <a class="header-anchor" href="#단계-3-텍스트-임베딩-생성" aria-label="Permalink to “단계 3: 텍스트 임베딩 생성”">​</a></h3><div class="language-java"><button title="Copy code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EmbeddingService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAiEmbeddingClient embeddingClient;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EmbeddingService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(OpenAiEmbeddingClient </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">embeddingClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.embeddingClient </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> embeddingClient;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">generateEmbedding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> embeddingClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">embed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(text);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="단계-4-벡터-저장-및-검색-간단한-구현" tabindex="-1">단계 4: 벡터 저장 및 검색 (간단한 구현) <a class="header-anchor" href="#단계-4-벡터-저장-및-검색-간단한-구현" aria-label="Permalink to “단계 4: 벡터 저장 및 검색 (간단한 구현)”">​</a></h3><div class="language-java"><button title="Copy code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SimpleVectorStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; vectorMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HashMap&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Map&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; textMap </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HashMap&lt;&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> storeVector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">vector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        vectorMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id, vector);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        textMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id, text);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findMostSimilar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">queryVector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String mostSimilarId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> maxSimilarity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Map.Entry&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; entry </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vectorMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">entrySet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> similarity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cosineSimilarity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(queryVector, entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (similarity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> maxSimilarity) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                maxSimilarity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> similarity;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                mostSimilarId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entry.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getKey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> textMap.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mostSimilarId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> double</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cosineSimilarity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">vectorA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">vectorB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dotProduct </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> normA </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> normB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vectorA.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            dotProduct </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vectorA.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vectorB.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            normA </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vectorA.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            normB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pow</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vectorB.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dotProduct </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sqrt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(normA) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sqrt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(normB));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="단계-5-rag-시스템-통합" tabindex="-1">단계 5: RAG 시스템 통합 <a class="header-anchor" href="#단계-5-rag-시스템-통합" aria-label="Permalink to “단계 5: RAG 시스템 통합”">​</a></h3><div class="language-java"><button title="Copy code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RagService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EmbeddingService embeddingService;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SimpleVectorStore vectorStore;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OpenAiChatClient chatClient;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RagService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(EmbeddingService </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">embeddingService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                     SimpleVectorStore </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">vectorStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                     OpenAiChatClient </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chatClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.embeddingService </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> embeddingService;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.vectorStore </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vectorStore;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.chatClient </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chatClient;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">question</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 1. 질문 임베딩 생성</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; questionEmbedding </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> embeddingService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">generateEmbedding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(question);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 2. 관련 문서 검색</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String relevantText </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vectorStore.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findMostSimilar</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(questionEmbedding);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 3. LLM에 컨텍스트와 함께 질문</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;다음 문서 내용을 참고하여 질문에 답변하세요:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                       &quot;문서: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> relevantText </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                       &quot;질문: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> question </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                       &quot;답변:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chatClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(prompt);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="_5-간단한-java-구현-예제" tabindex="-1">5. 간단한 Java 구현 예제 <a class="header-anchor" href="#_5-간단한-java-구현-예제" aria-label="Permalink to “5. 간단한 Java 구현 예제”">​</a></h2><h3 id="전체-애플리케이션-코드" tabindex="-1">전체 애플리케이션 코드 <a class="header-anchor" href="#전체-애플리케이션-코드" aria-label="Permalink to “전체 애플리케이션 코드”">​</a></h3><div class="language-java"><button title="Copy code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SpringBootApplication</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SimpleRagApplication</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CommandLineRunner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> RagService ragService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DocumentLoader documentLoader;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EmbeddingService embeddingService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SimpleVectorStore vectorStore;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SpringApplication.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SimpleRagApplication.class, args);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String... </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Exception {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 문서 로드 및 처리</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; chunks </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> documentLoader.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadAndSplitDocuments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data/company_policy.txt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 벡터 저장소에 문서 저장</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; embedding </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> embeddingService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">generateEmbedding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chunks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            vectorStore.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">storeVector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;doc_&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i, chunks.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i), embedding);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 간단한 쿼리 인터페이스</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Scanner scanner </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Scanner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(System.in);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;RAG 시스템이 준비되었습니다. 질문을 입력하세요 (종료: exit):&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&gt; &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            String question </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> scanner.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nextLine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exit&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equalsIgnoreCase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(question)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                break</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            String answer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ragService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(question);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;답변: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> answer);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        scanner.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="application-properties-설정" tabindex="-1">application.properties 설정 <a class="header-anchor" href="#application-properties-설정" aria-label="Permalink to “application.properties 설정”">​</a></h3><div class="language-properties"><button title="Copy code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># OpenAI API 설정</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">spring.ai.openai.api-key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=your-openai-api-key</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">spring.ai.openai.chat.model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=gpt-3.5-turbo</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">spring.ai.openai.embedding.model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=text-embedding-ada-002</span></span></code></pre></div><hr><h2 id="_6-고급-기능" tabindex="-1">6. 고급 기능 <a class="header-anchor" href="#_6-고급-기능" aria-label="Permalink to “6. 고급 기능”">​</a></h2><ol><li><strong>고급 벡터 데이터베이스 도입</strong>: Chroma, Pinecone, Weaviate 등</li><li><strong>성능 최적화</strong>: 임베딩 캐싱, 비동기 처리</li><li><strong>정확도 향상</strong>: 다양한 검색 알고리즘, 재순위화</li><li><strong>보안 강화</strong>: 접근 제어, 데이터 암호화</li></ol>`,80)])])}const o=i(l,[["render",h]]);export{d as __pageData,o as default};
