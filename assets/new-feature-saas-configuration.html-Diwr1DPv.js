import{_ as a,c as t,a as n,o as s}from"./app-CC5quYyA.js";const i={};function o(d,e){return s(),t("div",null,e[0]||(e[0]=[n(`<h1 id="new-feature-saas-configuration" tabindex="-1"><a class="header-anchor" href="#new-feature-saas-configuration"><span>New feature SAAS configuration</span></a></h1><p>Implement SAAS isolation for a table, specifically implement the following functions</p><blockquote><ol><li>Add data to automatically inject the login user&#39;s tenant ID.</li><li>The query automatically filters data based on the tenant ID of the login user.</li></ol></blockquote><h2 id="specific-steps" tabindex="-1"><a class="header-anchor" href="#specific-steps"><span>Specific steps</span></a></h2><h3 id="_1-code-configuration" tabindex="-1"><a class="header-anchor" href="#_1-code-configuration"><span>1. Code configuration</span></a></h3><p>Add the table names that require tenant isolation to <code>org.jeecg.config.mybatis.MybatisPlusSaasConfig.TENANT_TABLE</code>the collection.</p><p>Example:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">TENANT_TABLE.add(&quot;demo&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>copy</p><p><img src="https://lfs.k.topthink.com/lfs/fac66a5f7672a8631505a0133279d8d7b387f6aac7724464c780cfb1dd473886.dat" alt=""></p><h3 id="_2-add-tenant-id-field-to-database-table" tabindex="-1"><a class="header-anchor" href="#_2-add-tenant-id-field-to-database-table"><span>2. Add tenant ID field to database table</span></a></h3><p>The above multi-tenant table needs to add a <code>int</code>type field <code>tenant_id</code>, and the corresponding Java entity also needs to add fields <code>tenantId</code>.</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">ALTER TABLE {表名} ADD COLUMN tenant_id int(10) NULL DEFAULT 0;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>copy</p><h3 id="_3-tenant-configuration" tabindex="-1"><a class="header-anchor" href="#_3-tenant-configuration"><span>3. Tenant Configuration</span></a></h3><h4 id="_3-1-adding-multi-tenancy" tabindex="-1"><a class="header-anchor" href="#_3-1-adding-multi-tenancy"><span>3.1 Adding multi-tenancy</span></a></h4><p>Go to System Management &gt; Tenant Management and configure tenants.</p><p><img src="https://lfs.k.topthink.com/lfs/663f234f9843c7d19cd370e65f097d21c9572371d7c35e9d022605d4aa315db5.dat" alt=""></p><h4 id="_3-2-assigning-tenants-to-users" tabindex="-1"><a class="header-anchor" href="#_3-2-assigning-tenants-to-users"><span>3.2 Assigning tenants to users</span></a></h4><p>Enter [User Management] to set the user&#39;s tenant. One user can select multiple tenants.<br><img src="https://lfs.k.topthink.com/lfs/5c53e0e19b72403c649b567fc86779edb0258cf88ffaed5008cce727560b612b.dat" alt=""></p><h3 id="_4-select-tenant-login-test" tabindex="-1"><a class="header-anchor" href="#_4-select-tenant-login-test"><span>4. Select tenant login (test)</span></a></h3><p>When a user has multiple tenants, a tenant will be automatically selected to log in or the tenant that logged in last time when logging in. To switch tenants,<br> click &quot;Switch Department&quot; in the upper right corner.<br> When you access the corresponding module at this time, you will find that the data is isolated by tenant ID, and new data will automatically carry the tenant ID.</p><hr><h3 id="other-rules" tabindex="-1"><a class="header-anchor" href="#other-rules"><span>Other Rules</span></a></h3><h4 id="_1-how-to-pass-multi-tenant-ids-between-different-services-under-microservices" tabindex="-1"><a class="header-anchor" href="#_1-how-to-pass-multi-tenant-ids-between-different-services-under-microservices"><span>1. How to pass multi-tenant IDs between different services under microservices</span></a></h4><ul><li>After logging in, the tenant ID will be stored on the front end</li><li>Each request will carry a header <code>X-Tenant-Id</code>value of the tenant ID</li><li>Each service can get the tenant ID from the request</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code><span class="line">String tenantId = req.getHeader(&quot;X-Tenant-Id&quot;);</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>copy</p><h4 id="_2-when-the-user-has-not-been-assigned-a-tenant" tabindex="-1"><a class="header-anchor" href="#_2-when-the-user-has-not-been-assigned-a-tenant"><span>2. When the user has not been assigned a tenant</span></a></h4><p>Log in <code>X-Tenant-Id</code>with the default tenant ID<code>0</code></p>`,30)]))}const c=a(i,[["render",o]]),l=JSON.parse('{"path":"/syncboot/multi-tenancy-ccapabilities/new-feature-saas-configuration.html","title":"New feature SAAS configuration","lang":"ko-KR","frontmatter":{"order":4},"git":{"updatedTime":1749510202000,"contributors":[{"name":"poh","username":"poh","email":"poh@empasy.com","commits":1,"url":"https://github.com/poh"}],"changelog":[{"hash":"e8d2845a48d72a49b99a62ed0e9511823ff14831","time":1749510202000,"email":"poh@empasy.com","author":"poh","message":"로고 alt text 변경"}]},"filePathRelative":"syncboot/multi-tenancy-ccapabilities/new-feature-saas-configuration.md"}');export{c as comp,l as data};
